# ===========================================
# DocuQuery Helm Chart Values
# ===========================================

# Global settings
global:
  environment: staging
  imagePullSecrets: []

# ===========================================
# API Configuration
# ===========================================
api:
  replicaCount: 2
  
  image:
    repository: ghcr.io/fnusatvik07/docuquery
    tag: "latest"
    pullPolicy: Always
  
  service:
    type: ClusterIP
    port: 8000
  
  ingress:
    enabled: true
    className: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
      nginx.ingress.kubernetes.io/rate-limit: "100"
    hosts:
      - host: api.docuquery.staging.example.com
        paths:
          - path: /
            pathType: Prefix
    tls:
      - secretName: docuquery-tls
        hosts:
          - api.docuquery.staging.example.com
  
  resources:
    requests:
      memory: "256Mi"
      cpu: "250m"
    limits:
      memory: "512Mi"
      cpu: "500m"
  
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80
  
  podDisruptionBudget:
    enabled: true
    minAvailable: 1
  
  nodeSelector: {}
  tolerations: []
  affinity: {}

# ===========================================
# Configuration
# ===========================================
config:
  # LLM Settings
  llmProvider: openai
  llmModel: gpt-4o
  llmTemperature: "0.0"
  llmMaxTokens: "1024"
  
  # Embedding Settings
  embeddingModel: text-embedding-3-large
  embeddingDimensions: "3072"
  
  # Chunking Settings
  chunkSize: "500"
  chunkOverlap: "50"
  
  # Retrieval Settings
  retrievalTopK: "5"
  retrievalScoreThreshold: "0.7"
  
  # Rate Limiting
  rateLimitRequests: "100"
  rateLimitWindow: "60"
  
  # Feature Flags
  enableReranking: false
  enableSemanticCache: false

# ===========================================
# Secrets (use external-secrets in production)
# ===========================================
secrets:
  # Set to true to create secrets from values
  # In production, use external-secrets-operator
  create: true
  openaiApiKey: ""
  anthropicApiKey: ""
  
  # External Secrets Configuration
  externalSecrets:
    enabled: false
    secretStore: aws-secrets-manager
    refreshInterval: 1h

# ===========================================
# Qdrant Vector Store
# ===========================================
qdrant:
  enabled: true
  replicaCount: 1
  
  persistence:
    enabled: true
    size: 10Gi
    storageClass: ""
  
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "1Gi"
      cpu: "500m"

# ===========================================
# Monitoring
# ===========================================
monitoring:
  enabled: true
  
  prometheus:
    enabled: true
    scrapeInterval: 30s
  
  serviceMonitor:
    enabled: true
    namespace: monitoring
    labels:
      release: prometheus

# ===========================================
# Network Policies
# ===========================================
networkPolicy:
  enabled: true
  allowIngressFrom:
    - namespaceSelector:
        matchLabels:
          name: ingress-nginx
    - namespaceSelector:
        matchLabels:
          name: monitoring

# ===========================================
# Service Account
# ===========================================
serviceAccount:
  create: true
  name: ""
  annotations: {}
